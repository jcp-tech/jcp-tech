<div id="home" class="pt-28 md:pt-36 w-full mb-10">
  <div
    class="grid grid-cols-1 lg:grid-cols-[60%_1fr] gap-12 lg:gap-8 items-stretch"
  >
    <!-- Left Panel: Content Source for Height -->
    <div class="flex flex-col gap-8 relative z-10">
      <!-- Interactive Python Editor Card -->
      <div
        class="relative rounded-xl border shadow-2xl overflow-hidden group transition-all duration-300 hover:shadow-[0_0_30px_rgba(37,244,244,0.1)]"
        style="background-color: {{ syntax_colors.editor_bg }}; border-color: {{ syntax_colors.editor_border }};"
      >
        <!-- Editor Header -->
        <div
          class="flex items-center justify-between px-4 py-3 border-b"
          style="background-color: {{ syntax_colors.editor_header_bg }}; border-color: {{ syntax_colors.editor_header_border }};"
        >
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 rounded-full shadow-sm" style="background-color: {{ syntax_colors.window_btn_red }};"></div>
            <div class="w-3 h-3 rounded-full shadow-sm" style="background-color: {{ syntax_colors.window_btn_yellow }};"></div>
            <div class="w-3 h-3 rounded-full shadow-sm" style="background-color: {{ syntax_colors.window_btn_green }};"></div>
          </div>
          <div
            class="absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2 opacity-70"
          >
            <span class="material-symbols-outlined text-[16px] text-blue-400"
              >code</span
            >
            <span class="text-xs text-gray-400 font-mono tracking-wide"
              >developer_profile.py</span
            >
          </div>

          <!-- Run Button -->
          <button
            id="run-code-btn"
            onclick="runCode()"
            class="flex items-center gap-1.5 px-3 py-1 rounded-md transition-all duration-300 hover:shadow-[0_0_10px_rgba(74,222,128,0.3)] cursor-pointer"
            style="background-color: {{ syntax_colors.run_btn_bg }}; color: {{ syntax_colors.run_btn_text }};"
            onmouseover="this.style.backgroundColor='{{ syntax_colors.run_btn_hover_bg }}'"
            onmouseout="this.style.backgroundColor='{{ syntax_colors.run_btn_bg }}'"
            title="Execute Python"
          >
            <span class="material-symbols-outlined text-[18px]" id="run-icon"
              >play_arrow</span
            >
            <span
              class="text-xs font-bold font-mono uppercase tracking-wider"
              id="run-text"
              >Run</span
            >
          </button>
        </div>

        <!-- Editor Body -->
        <div class="relative p-0 overflow-x-auto min-h-[350px]" style="background-color: {{ syntax_colors.editor_bg }};">
          <style>
            /* Custom Syntax Highlighting - Always Dark Mode */
            .code-content .c, .code-content .c1, .code-content .cm { color: {{ syntax_colors.comments }}; }
            .code-content .k { color: {{ syntax_colors.keywords }}; }
            .code-content .kd { color: {{ syntax_colors.keywords }}; }
            .code-content .kc { color: {{ syntax_colors.control_keywords }}; }
            .code-content .kn { color: {{ syntax_colors.control_keywords }}; }
            .code-content .kp { color: {{ syntax_colors.keywords }}; }
            .code-content .nc { color: {{ syntax_colors.class_names }}; }
            .code-content .nf { color: {{ syntax_colors.functions }}; }
            .code-content .fm { color: {{ syntax_colors.functions }}; }
            .code-content .bp { color: {{ syntax_colors.variables }}; }
            .code-content .vm { color: {{ syntax_colors.variables }}; }
            .code-content .n { color: {{ syntax_colors.variables }}; }
            .code-content .s, .code-content .s1, .code-content .s2 { color: {{ syntax_colors.strings }}; }
            .code-content .sa { color: {{ syntax_colors.fstrings_rstrings }}; }
            .code-content .si { color: {{ syntax_colors.fstrings_rstrings }}; }
            .code-content .se { color: {{ syntax_colors.string_escapes }}; }
            .code-content .nb { color: {{ syntax_colors.builtins_functions }}; }
            .code-content .o { color: {{ syntax_colors.operators_punctuation }}; }
            .code-content .p { color: {{ syntax_colors.operators_punctuation }}; }
            .code-content .pb { color: {{ syntax_colors.function_brackets }}; }
            .code-content .nd { color: {{ syntax_colors.decorators }}; }
            .code-content .nn { color: {{ syntax_colors.module_names }}; }
            .code-content .m, .code-content .mi, .code-content .mf { color: {{ syntax_colors.numbers }}; }
            .code-content .err { color: {{ syntax_colors.errors }}; }
          </style>
          <div class="flex font-mono text-sm sm:text-base leading-relaxed">
            <!-- Line Numbers -->
            <div
              class="flex flex-col items-end px-3 py-6 select-none border-r min-w-[3rem]"
              style="background-color: {{ syntax_colors.editor_bg }}; color: {{ syntax_colors.editor_line_numbers }}; border-color: {{ syntax_colors.editor_line_border }};"
            >
              {% for n in range(1, line_count + 1) %}
              <div class="h-[24px]">{{ n }}</div>
              {% endfor %}
            </div>

            <!-- Code Content -->
            <pre
              class="flex-1 p-6 code-content"
              style="line-height: 24px; color: {{ syntax_colors.editor_code_text }};"
            ><code>{{ code_base | safe }}</code></pre>
          </div>
        </div>

        <!-- Terminal Popup Overlay -->
        <div
          id="terminal-overlay"
          class="hidden absolute inset-0 backdrop-blur-sm z-20 flex flex-col p-4 animate-in fade-in slide-in-from-bottom-4 duration-300 rounded-xl"
          style="background-color: {{ syntax_colors.terminal_overlay_bg }};"
        >
          <div
            class="flex justify-between items-center mb-4 border-b pb-2"
            style="border-color: {{ syntax_colors.terminal_border }};"
          >
            <span class="text-xs font-mono" style="color: {{ syntax_colors.terminal_header_text }};">TERMINAL Output</span>
            <button
              onclick="closeTerminal()"
              class="text-gray-400 hover:text-white transition-colors"
            >
              <span class="material-symbols-outlined text-[18px]">close</span>
            </button>
          </div>
          <div
            id="terminal-content"
            class="font-mono text-sm sm:text-base leading-relaxed overflow-y-auto custom-scrollbar whitespace-pre-wrap"
            style="color: {{ syntax_colors.terminal_output_text }};"
          ></div>
          <!-- Hidden data for JS to read -->
          <script id="terminal-data" type="text/plain">
{{ terminal_output | safe }}
          </script>
        </div>
      </div>

      <!-- Social Pills -->
      <div class="flex flex-wrap gap-4">
        {% for pill in SOCIAL_PILLS %} {% if pill.active %}
        <a
          href="{{ pill.link }}"
          {%
          if
          pill.name
          !="Gmail"
          %}target="_blank"
          rel="noopener noreferrer"
          {%
          endif
          %}
          class="flex items-center gap-2 px-5 py-2.5 rounded-full border transition-all duration-300 group shadow-sm social-pill"
          style="
            border-color: var(--social-pill-border);
            background-color: var(--social-pill-bg);
          "
          onmouseover="this.style.backgroundColor='var(--social-pill-hover-bg)'"
          onmouseout="this.style.backgroundColor='var(--social-pill-bg)'"
        >
          {{ pill.svg_icon | safe }}
          <span
            class="text-sm font-medium pill-text"
            style="color: var(--social-pill-text);"
            onmouseover="this.style.color='var(--social-pill-hover-text)'"
            onmouseout="this.style.color='var(--social-pill-text)'"
            >{{ pill.name }}</span
          >
        </a>
        {% endif %} {% endfor %}
      </div>
    </div>

    <!-- Right Panel: Dashboard Widgets -->
    <div class="relative w-full lg:h-full">
      <div
        class="lg:absolute lg:inset-0 lg:overflow-y-auto pr-2 custom-scrollbar pb-1"
      >
        {% include "components/dashboard_widgets.html" ignore missing %}
      </div>
    </div>
  </div>
</div>
